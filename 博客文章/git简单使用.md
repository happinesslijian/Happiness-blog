## 准备工作
[下载windows Git](https://github.com/git-for-windows/git/releases/download/v2.24.0.windows.2/Git-2.24.0.2-64-bit.exe)
* 安装 Git
* 配置Git
```
# 局部配置 [在项目下面]
git config user.name "远程仓库用户名（如：github用户名）"
git config user.email "远程仓库绑定邮箱"

# 全局配置
git config --global user.name "远程仓库用户名（如：github用户名）"
git config --global user.email "远程仓库绑定邮箱"
```

## 具体操作步骤

* 初始化版本库
```
git init 
```
* 添加文件到版本库（只是添加到缓存区），.代表添加文件夹下所有文件
```
git add .
```
* 把添加的文件提交到版本库，并填写提交备注
```
git commit -m "first commit"  
```
* 把本地库与远程库关联
```
git remote add origin 你的远程库地址 
```
* 第一次推送时需要加-u，以后提交就不需要  
    **注意：回车之后需要输入你的远程仓库用户名和密码**
```
git push -u origin master 
```

## 撤销提交
一种常见的场景是，提交代码以后，你突然意识到这个提交有问题，应该撤销掉，这时执行下面的命令就可以了。
```git revert HEAD```
上面命令的原理是，在当前提交后面，新增一次提交，抵消掉上一次提交导致的所有变化。它不会改变过去的历史，所以是首选方式，没有任何丢失代码的风险。

`git revert` 命令只能抵消上一个提交，如果想抵消多个提交，必须在命令行依次指定这些提交。比如，抵消前两个提交，要像下面这样写。

```
$ git revert [倒数第一个提交] [倒数第二个提交]
```
## 丢弃提交
如果希望以前的提交在历史中彻底消失，而不是被抵消掉，可以使用 `git reset` 命令，丢弃掉某个提交之后的所有提交。

```
$ git reset [last good SHA]
```

`git reset` 的原理是，让最新提交的指针回到以前某个时点，该时点之后的提交都从历史中消失。

默认情况下，`git reset` 不改变工作区的文件（但会改变暂存区），`--hard` 参数可以让工作区里面的文件也回到以前的状态。

```
$ git reset --hard [last good SHA]
```

执行 `git reset` 命令之后，如果想找回那些丢弃掉的提交，可以使用 `git reflog` 命令，具体做法参考这里。不过，这种做法有时效性，时间长了可能找不回来。
## 替换上一次提交
提交以后，发现提交信息写错了，这时可以使用 `git commit` 命令的 `--amend`  参数，可以修改上一次的提交信息。
```
$ git commit --amend -m "Fixes bug #42"
```

它的原理是产生一个新的提交对象，替换掉上一次提交产生的提交对象。

这时如果暂存区有发生变化的文件，会一起提交到仓库。所以，`--amend` 不仅可以修改提交信息，还可以整个把上一次提交替换掉。
## 撤销工作区的文件修改
如果工作区的某个文件被改乱了，但还没有提交，可以用 `git checkout` 命令找回本次修改之前的文件。
```
$ git checkout -- [filename]
```
它的原理是先找暂存区，如果该文件有暂存的版本，则恢复该版本，否则恢复上一次提交的版本。
注意，工作区的文件变化一旦被撤销，就无法找回了。
## 从暂存区撤销文件
如果不小心把一个文件添加到暂存区，可以用下面的命令撤销。
```
$ git rm --cached [filename]
```
上面的命令不影响已经提交的内容。

## 撤销当前分支的变化
你在当前分支上做了几次提交，突然发现放错了分支，这几个提交本应该放到另一个分支。
```
# 新建一个 feature 分支，指向当前最新的提交
# 注意，这时依然停留在当前分支
$ git branch feature

# 切换到这几次提交之前的状态
$ git reset --hard [当前分支此前的最后一次提交]

# 切换到 feature 分支
$ git checkout feature
```

[更多参考详见](https://www.liaoxuefeng.com/wiki/896043488029600)

